<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="devy.americano.backend.mapper.NewsMapper">

    <select id="selectAllNews" resultType="devy.americano.backend.domain.News">
        select * from news
        order by reg_date desc
        ;
    </select>

    <select id="selectNewsContents" resultType="devy.americano.backend.domain.NewsContents">
        select
            n.news_no,
            pr.name as publisher,
            pr.favicon,
            n.title,
            n.link,
            n.description,
            n.pub_date,
            n.image,
            n.author,
            n.card_type
        from news n
        join publisher_rss pr on pr.publisher_rss_no = n.publisher_rss_no
        order by n.news_no desc
        limit #{offset}, #{limit}
        ;
    </select>

    <insert id="insertNews">
        insert or ignore into news ( publisher_rss_no, title, link, description, pub_date, image, author, card_type )
        values ( #{publisherRssNo}, #{title}, #{link}, #{description}, #{pubDate}, #{image}, #{author}, #{cardType} );
    </insert>

</mapper>